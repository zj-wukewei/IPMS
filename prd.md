# 智能项目管理系统 (IPMS) 产品需求文档 (PRD)

| 文档版本 | V1.3 |
| :--- | :--- |
| 创建日期 | 2025年9月5日 |
| 更新日期 | 2025年9月5日 |
| 创建人 | AI Product Manager |
| 状态 | 修订稿 (排期引擎逻辑重构) |

---

## 1. 背景与概述

### 1.1. 项目背景
在当前快节奏的软件开发环境中，项目管理面临着日益增长的复杂性。传统的项目管理工具虽然能够记录和跟踪任务，但在资源分配、工时评估、风险预测等方面高度依赖项目经理的人工经验，导致效率低下、排期不准、资源错配等问题频发。本项目旨在打造一款**智能项目管理系统（Intelligent Project Management System, IPMS）**，通过引入AI能力，实现项目管理流程的自动化、智能化和最优化，从而解放生产力，提升项目交付的确定性。

### 1.2. 产品目标
*   **核心目标：** 打造一个能够自动进行任务分解、智能评估工时、精准匹配人员、动态进行阶段性排期，并能主动预警项目风险的下一代项目管理平台。
*   **近期目标 (V1.3)：**
    *   实现基于规则的需求到任务的自动分解。
    *   建立**面向需求级别**、基于人员经验系数的工时评估模型。
    *   提供基于职位和可用工时的人员推荐功能。
    *   实现对版本规划的**阶段性里程碑排期**与资源需求预测。
    *   上线**智能风险评估**功能，实现对任务延期和依赖阻塞的自动预警。
*   **远期目标：**
    *   引入机器学习模型，基于历史数据持续优化工时评估和任务分解的准确性。
    *   实现更精细化的技能图谱匹配。
    *   与Git、CI/CD等外部系统深度集成，实现进度的自动跟踪。

## 2. 用户画像与核心场景 (已修订)

| 用户角色 | 核心诉求 | 典型场景 |
| :--- | :--- | :--- |
| **项目经理 (PM)** | 提高排期准确性，合理分配资源，**及时发现并应对风险**，减少事务性工作。 | 1. **(预测性排期):** 规划新版本时，向AI提问：“基于当前团队资源和已规划的需求，请预测我们最早可以在何时完成**原型、UI、开发、联调、测试和最终发布**？”<br>2. **(固定截止日期分析):** CEO给出了一个硬性的发布截止日期。PM向AI提问：“到这个日期为止，以**优先级**排序，我们能完成哪些需求？如果要完成所有需求，我们**需要补充哪些岗位、多少工时**？请分别给出这两种情况下的关键里程碑时间点。”<br>3. **(风险监控):** 项目进行中，能自动收到潜在延期风险的告警。 |
| **技术负责人 (TL)** | 确保技术方案的合理性，任务分配符合团队成员的技术能力。 | 1. 评审AI自动分解的任务列表是否合理。<br>2. 当AI建议补充资源时，从技术角度评估其合理性。 |
| **开发/测试/设计人员** | 接收到清晰、明确的任务，专注于执行。 | 1. 在个人看板中查看被分配的任务。<br>2. 更新任务状态，记录实际消耗工时。 |
| **管理者 (CTO/部门主管)** | 宏观了解项目组合的健康度、资源投入情况和交付进度。 | 1. 查看跨项目的资源负载情况，进行战略性的人员调配。<br>2. **通过版本健康度评分，快速识别有风险的项目。** |

## 3. 功能需求 (V1.3)

### 3.1. 核心实体管理 (基础功能)
系统需支持以下核心实体的创建、读取、更新和删除（CRUD）操作。

| 实体 | 描述 | 关键属性 |
| :--- | :--- | :--- |
| **项目 (Project)** | 工作的基本单元，包含版本、需求和成员。 | 项目名称、描述、起止日期、项目成员 |
| **版本 (Version)** | 项目的交付里程碑，包含一系列需求。 | 版本号、版本类型、发布日期、关联需求、**阶段性里程碑** |
| **需求 (Requirement)** | 描述一个用户价值或业务目标。 | 需求标题、描述、需求类型、优先级、**依赖关系**、所属版本、**预估工时** |
| **任务 (Task)** | 为完成需求而产生的可执行工作项。 | 任务标题、任务类型、状态、**实际工时**、执行人、起止日期 |
| **人员 (Member)** | 系统的用户。 | 姓名、**职位 (JobTitle)**、**职级 (JobLevel)**、技能标签 |
| **项目成员 (ProjectMember)** | 人员与项目的关系。 | **角色 (MemberRole)**、**每日可用工时** |

### 3.2. AI 核心功能

#### 3.2.1. 引擎一：需求-任务自动分解
*   **FR1.1:** 当用户创建一个新的“需求”后，系统应根据预设的模板，自动为其创建一组关联的“任务”清单。这些任务主要用于过程跟踪和责任分配。

#### 3.2.2. 引擎二：AI 工时评估 (已修订)
*   **FR2.1 (评估对象):** 工时评估的对象是**整个“需求” (Requirement)**，而非单个任务。
*   **FR2.2 (评估输出):** 当一个需求被创建或更新时，AI引擎被触发。它会分析需求信息，并输出一个**按职位分类的基准工时组合**。
    *   **输出示例 (JSON格式):** `{"total_base_hours": 70, "breakdown": [{"job_title": "BACKEND", "base_hours": 40}, {"job_title": "FRONTEND", "base_hours": 30}]}`
    *   这里的“基准工时”指假定由**中级工程师 (经验系数1.0)** 执行所需的小时数。
*   **FR2.3 (工时应用):** 这个评估结果将作为“需求”的**预估工时**属性，并成为后续智能排期引擎的主要输入。

#### 3.2.3. 引擎三：最佳人员匹配
*   **FR3.1:** 在任务详情页，对于未分配的任务，系统应提供一个“建议执行人”列表。
*   **FR3.2:** 推荐逻辑：
    1.  **资格筛选：** 根据**任务类型**筛选出**职位 (JobTitle)** 匹配的项目成员。
    2.  **可用性筛选：** 筛选出在任务计划时段内，**每日可用工时** > 0 的成员。
    3.  **排序推荐：** 对候选人进行排序，优先推荐**当前负载较低**且**经验系数较低（效率更高）**的成员。

#### 3.2.4. 引擎四：智能排期与预测 (已重构)

此引擎是项目规划的核心大脑，它整合了所有需求、资源和依赖信息，提供强大的预测能力。

*   **FR4.1 (核心输入):**
    *   版本内所有**需求**的列表（包含`优先级`和`依赖关系`）。
    *   每个需求的**预估工时**（按职位细分的基准工时）。
    *   项目中所有可用**人员**的列表（包含`职位`、`经验系数`和`每日可用工时`）。

*   **FR4.2 (核心输出):**
    *   引擎的所有输出都**必须包含**以下六个**关键里程碑**的预测日期：
        1.  `原型完成时间`
        2.  `UI完成时间`
        3.  `开发完成时间`
        4.  `联调时间`
        5.  `测试时间`
        6.  `发布时间`
    *   引擎需要内置一个可配置的逻辑，将不同类型的任务（如`DESIGN`, `DEVELOPMENT`）的完成时间映射到对应的里程碑节点上。

*   **FR4.3 (工作模式一：预测性排期):**
    *   **触发方式:** 用户在版本规划页面点击“预测排期”按钮。
    *   **处理逻辑:**
        1.  引擎获取所有核心输入。
        2.  基于需求的依赖关系进行拓扑排序。
        3.  模拟一个最优的资源分配过程（将工时“填充”到最合适的可用人员时间线上，并考虑经验系数对实际耗时的影响）。
        4.  计算出所有任务的预计完成时间。
    *   **输出:** 返回一个包含上述**六大关键里程碑**预测日期的排期报告。

*   **FR4.4 (工作模式二：固定截止日期分析):**
    *   **触发方式:** 用户为版本设定一个“期望发布日期”，并点击“分析”按钮。
    *   **处理逻辑:**
        1.  引擎获取所有核心输入，以及用户设定的“截止日期”。
        2.  **场景一 (模拟交付):** 引擎严格按照需求的`优先级`，从高到低进行排期，直到排满到截止日期为止。
        3.  **场景二 (缺口分析):** 如果有需求未能排入，引擎会计算要完成这些剩余需求，还需要多少不同`职位`的`工时`。
    *   **输出:** 返回一个包含两部分的分析报告：
        1.  **“按时交付方案”:**
            *   一个可完成的需求列表。
            *   该方案下的**六大关键里程碑**预测日期。
        2.  **“完全交付方案”:**
            *   明确的**资源补充建议**，格式为：“为完成所有需求，建议补充：`[后端工程师] 240小时`，`[前端工程师] 160小时`”。
            *   在该建议资源被满足的前提下，重新计算并展示**六大关键里程碑**的预测日期。

#### 3.2.5. 引擎五：智能风险评估
*   **FR5.1 (任务延期风险):** 系统持续监控任务进展。若任务的“预计完成时间”已到，但状态仍未“完成”，则标记为“延期风险”，并在版本Dashboard上预警。
*   **FR5.2 (依赖阻塞风险):** 若一个需求中的关键任务延期，导致整个需求有延期风险，系统应自动识别被其阻塞的下游需求，并标记为“依赖阻塞风险”。
*   **FR5.3 (版本健康度评分):** 在版本Dashboard上，提供一个动态的“版本健康度”评分（A-F或百分制）。
*   **FR5.4 (主动通知):** 当识别到重大风险时，系统应向项目经理发送主动通知。

## 4. 数据模型定义
*(基于我们讨论的枚举)*

| 分类 | 编码 (Code) | 显示名称 (DisplayName) | 描述/关键参数 |
| :--- | :--- | :--- | :--- |
| **需求类型** | FEATURE, ENHANCEMENT, BUG_FIX, ... | 功能需求, 功能增强, 缺陷修复, ... | |
| **版本类型** | MAJOR, MINOR, PATCH, HOTFIX | 主版本, 次版本, 补丁版本, ... | |
| **任务类型** | DEVELOPMENT, TESTING, DESIGN, ... | 开发任务, 测试任务, 设计任务, ... | |
| **职位 (JobTitle)** | PRODUCT, FRONTEND, BACKEND, ... | 产品经理, 前端工程师, 后端工程师, ... | |
| **职级 (JobLevel)** | INTERN(1), JUNIOR(2), ..., EXPERT(5) | 实习生, 初级, ..., 技术专家 | `experienceMultiplier`: 1.5, 1.3, ..., 0.6 |
| **成员角色 (MemberRole)** | PROJECT_MANAGER, TECH_LEAD, ... | 项目经理, 技术负责人, ... | |

## 5. 非功能性需求

| 类别 | 需求描述 |
| :--- | :--- |
| **性能** | 页面加载时间 < 2秒，AI计算与推荐响应时间 < 3秒。 |
| **可用性** | 界面设计简洁直观，核心操作（如创建需求、分配任务）步骤不超过3步。 |
| **安全性** | 支持基于角色的权限控制，普通成员只能查看和编辑自己的任务。 |
| **可扩展性** | 系统设计应支持未来引入新的AI模型和与第三方系统集成。 |

## 6. 未来范围 (V2.0+)
*   基于历史数据的机器学习工时评估模型。
*   精细化技能图谱（如 Java, React）与任务的智能匹配。
*   与Git/GitLab集成，根据代码提交自动更新任务状态。
*   更复杂的风险预警模型（如识别人员离- 职风险、技术债风险）。

---